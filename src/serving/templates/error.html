<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error {{ error_code }} - {{ error_message }}</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --text-muted: #adb5bd;
            --border-color: #dee2e6;
            --error-color: #dc3545;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            --radius: 8px;
        }

        [data-theme="dark"] {
            --bg-primary: #1a1d23;
            --bg-secondary: #2d3139;
            --text-primary: #e9ecef;
            --text-secondary: #adb5bd;
            --text-muted: #6c757d;
            --border-color: #495057;
            --error-color: #f87171;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background: var(--bg-secondary);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 40px;
            text-align: center;
            position: relative;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--bg-primary);
            transform: rotate(180deg);
        }

        .theme-toggle svg {
            width: 20px;
            height: 20px;
            fill: var(--text-secondary);
        }

        .error-code {
            font-size: 72px;
            font-weight: 700;
            color: var(--error-color);
            margin-bottom: 16px;
            letter-spacing: -2px;
        }

        .error-message {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .error-description {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 32px;
            line-height: 1.5;
        }

        .divider {
            width: 60px;
            height: 3px;
            background: var(--error-color);
            margin: 0 auto 32px;
            border-radius: 2px;
        }

        .details {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: calc(var(--radius) / 2);
            padding: 20px;
            margin-top: 32px;
            text-align: left;
        }

        .details-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .details-content {
            font-size: 14px;
            color: var(--text-muted);
            font-family: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace;
            word-break: break-all;
        }

        .back-link {
            display: inline-block;
            margin-top: 32px;
            padding: 12px 24px;
            background: var(--error-color);
            color: white;
            text-decoration: none;
            border-radius: calc(var(--radius) / 2);
            font-weight: 500;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .back-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
        }

        @media (max-width: 640px) {
            .container {
                padding: 32px 24px;
            }

            .error-code {
                font-size: 56px;
            }

            .error-message {
                font-size: 20px;
            }

            .error-description {
                font-size: 14px;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                transition: none !important;
                animation: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="display: none;">
                <path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z"/>
                <path d="M12 2V4M12 20V22M4.93 4.93L6.34 6.34M17.66 17.66L19.07 19.07M2 12H4M20 12H22M6.34 17.66L4.93 19.07M19.07 4.93L17.66 6.34"/>
            </svg>
            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
        </button>

        <div class="error-code">{{ error_code }}</div>
        <div class="error-message">{{ error_message }}</div>
        <div class="divider"></div>
        <div class="error-description">
            {% if error_code == 400 %}
                The request could not be understood by the server due to malformed syntax.
            {% elif error_code == 401 %}
                You are not authorized to access this resource. Please check your credentials.
            {% elif error_code == 403 %}
                You don't have permission to access this resource.
            {% elif error_code == 404 %}
                The page you are looking for could not be found. It may have been moved or deleted.
            {% elif error_code == 405 %}
                The request method is not allowed for this resource.
            {% elif error_code == 408 %}
                The server timed out waiting for the request.
            {% elif error_code == 409 %}
                The request could not be completed due to a conflict with the current state of the resource.
            {% elif error_code == 410 %}
                The requested resource is no longer available and has been permanently removed.
            {% elif error_code == 413 %}
                The request entity is larger than the server is willing or able to process.
            {% elif error_code == 414 %}
                The requested URL is too long for the server to process.
            {% elif error_code == 415 %}
                The media type of the requested data is not supported by the server.
            {% elif error_code == 418 %}
                I'm a teapot. This server refuses to brew coffee because it is, permanently, a teapot.
            {% elif error_code == 422 %}
                The request was well-formed but was unable to be followed due to semantic errors.
            {% elif error_code == 429 %}
                You have sent too many requests in a given amount of time. Please try again later.
            {% elif error_code == 500 %}
                The server encountered an unexpected condition that prevented it from fulfilling the request.
            {% elif error_code == 501 %}
                The server does not support the functionality required to fulfill the request.
            {% elif error_code == 502 %}
                The server received an invalid response from an upstream server.
            {% elif error_code == 503 %}
                The server is currently unable to handle the request. Please try again later.
            {% elif error_code == 504 %}
                The server did not receive a timely response from an upstream server.
            {% elif error_code == 505 %}
                The server does not support the HTTP protocol version used in the request.
            {% else %}
                An unexpected error occurred while processing your request.
            {% endif %}
        </div>

        {% if details %}
        <div class="details">
            <div class="details-title">Technical Details</div>
            <div class="details-content">{{ details }}</div>
        </div>
        {% endif %}

        <a href="/" class="back-link">Go to Homepage</a>
    </div>

    <script>
        // Check for saved theme preference or default to system preference
        function getThemePreference() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                return savedTheme;
            }
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        // Apply theme
        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            
            // Update icon visibility
            const sunIcon = document.querySelector('.sun-icon');
            const moonIcon = document.querySelector('.moon-icon');
            
            if (theme === 'dark') {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            } else {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            }
        }

        // Toggle theme
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            applyTheme(newTheme);
            localStorage.setItem('theme', newTheme);
        }

        // Initialize theme
        document.addEventListener('DOMContentLoaded', () => {
            applyTheme(getThemePreference());
        });

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                applyTheme(e.matches ? 'dark' : 'light');
            }
        });
    </script>
</body>
</html>